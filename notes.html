EC2 stands for:
Elastic Compute Cloud

Breakdown, briefly:
Elastic ‚Üí you can start, stop, scale up/down anytime
Compute ‚Üí CPU + memory (a virtual computer)
Cloud ‚Üí hosted by AWS, not on your own hardware
So Amazon EC2 literally means:
‚ÄúOn-demand virtual servers in the cloud.‚Äù
-------------------
sudo su
yum update -y
yum install httpd
systemctl start httpd
systemctl enable httpd
echo "Hello World" > /var/www/html/index.html
 
curl http://169.254.169.254/latest/meta-data
curl http://169.254.169.254/latest/meta-data/ami-id
curl http://169.254.169.254/latest/meta-data/hostname
curl http://169.254.169.254/latest/meta-data/instance-id
curl http://169.254.169.254/latest/meta-data/instance-type
 
curl http://169.254.169.254/latest/dynamic
curl http://169.254.169.254/latest/dynamic/instance-identity
curl http://169.254.169.254/latest/dynamic/instance-identity/document
 
curl -s http://169.254.169.254/latest/dynamic/instance-identity/document > /var/www/html/index.html

-----------------
Remember to access the TOKEN!! ->
TOKEN=$(curl -sX PUT "http://169.254.169.254/latest/api/token" \
  -H "X-aws-ec2-metadata-token-ttl-seconds: 21600")

When the Apache web server is installed and running, we can access the metadata of the EC2 instance by making HTTP requests to the special IP address
META-DATA URL and Token -> http://169.254.169.254/

----------- 
Append any of the below id's append to the url so view the meta-data ->
[root@ip-172-31-19-70 ec2-user]# TOKEN=$(curl -sX PUT "http://169.254.169.254/latest/api/token" \
  -H "X-aws-ec2-metadata-token-ttl-seconds: 21600")
[root@ip-172-31-19-70 ec2-user]# echo $TOKEN
AQAAAF3o04f0Oau5RJn2sJS7FdgwluAvtvJ57EKtLWPsxLrCaXlmIA==
[root@ip-172-31-19-70 ec2-user]# curl -H "X-aws-ec2-metadata-token: $TOKEN" \
http://169.254.169.254/latest/meta-data/

ami-id
ami-launch-index
ami-manifest-path
block-device-mapping/
events/
hostname
iam/
identity-credentials/
instance-action
instance-id
instance-life-cycle
instance-type
local-hostname
local-ipv4
mac
metrics/
network/
placement/
profile
public-hostname
public-ipv4
public-keys/
reservation-id
security-groups
services/

------------------------
DYNAMIC DATA SERVICE GET INFORMATION ABOUT THE EC2 INSTANCE ITSELF ->
Remember to access the TOKEN!! ->
TOKEN=$(curl -sX PUT "http://169.254.169.254/latest/api/token" \
  -H "X-aws-ec2-metadata-token-ttl-seconds: 21600")
------------------------  
[root@ip-172-31-19-70 ec2-user]# TOKEN=$(curl -sX PUT "http://169.254.169.254/latest/api/token" \
  -H "X-aws-ec2-metadata-token-ttl-seconds: 21600")
[root@ip-172-31-19-70 ec2-user]# echo $TOKEN
AQAAAF3o04cZPRXC1otU7-5mjpnZnZtW49SoMWIIRWO7TiQ-cQt3PA==
[root@ip-172-31-19-70 ec2-user]# curl -H "X-aws-ec2-metadata-token: $TOKEN" \
http://169.254.169.254/latest/dynamic/instance-identity/document
{
  "accountId" : "965745962559",
  "architecture" : "x86_64",
  "availabilityZone" : "us-west-1a",
  "billingProducts" : null,
  "devpayProductCodes" : null,
  "marketplaceProductCodes" : null,
  "imageId" : "ami-0993d3759749c153c",
  "instanceId" : "i-05dd49b1c1811019f",
  "instanceType" : "t2.micro",
  "kernelId" : null,
  "pendingTime" : "2026-02-04T19:25:36Z",
  "privateIp" : "172.31.19.70",
  "ramdiskId" : null,
  "region" : "us-west-1",
  "version" : "2017-09-30"
}
------------------------
Amazon Linux 2023 and Apache is already installed

Restart Apache (httpd)
From the instance shell:
sudo systemctl restart httpd

Useful related commands
Check Apache status
sudo systemctl status httpd

You want:
active (running)

Start Apache (if it's stopped)
sudo systemctl start httpd

Stop Apache
sudo systemctl stop httpd

Enable Apache on boot (recommended)
sudo systemctl enable httpd

Quick sanity test after restart
On the instance:
curl http://localhost

In your browser:
http://<PUBLIC_IP>

If both work ‚Üí Apache is healthy.
Pro tip (so you don't confuse services later)

Apache service name = httpd
nginx service name = nginx

So ->
systemctl restart httpd   # Apache
systemctl restart nginx   # nginx
------------------------
EC2 Launch Template
Launch templates are a resource that contains the configuration information to launch an EC2 instance. 
A Launch Template in Amazon EC2 is a reusable blueprint for creating EC2 instances.

What it stores

A launch template can predefine:
AMI (OS)
Instance type (t3.micro, etc.)
Key pair
Security groups
IAM role
Storage (EBS)
User data (startup scripts)
Networking settings

Why it exists

Instead of re-configuring EC2 every time, you:
define the settings once
reuse them consistently
reduce mistakes

When it's used
Auto Scaling Groups
Repeatable environments (dev/test)
Standardized instance builds
Infrastructure-as-code workflows

A Launch Template is a saved EC2 configuration you can reuse to launch 
identical instances consistently.
-------------------------
What an AMI is (quick)

An AMI (Amazon Machine Image) in Amazon EC2 is a snapshot + blueprint of an EC2 instance.
It captures:

OS
installed software (Apache, configs, etc.)
disk state
instance configuration (not runtime data)

When you should create an AMI

Create an AMI if:
You spent time configuring the instance
It's a "known good" learning setup
You might want to recreate it later
You plan to terminate the instance to save money
This lets you:
safely delete the instance
relaunch it later exactly as it was
avoid redoing setup work

Think of it as a "save point".

AMIs cost small EBS snapshot storage, so don't create them unnecessarily.

An AMI is used to preserve a configured EC2 instance so it can be relaunched consistently in the future.
-------------------------
FOR PERSONAL USE ONLY - DO NOT SHARE PUBLICLY
Example EC2 user-data script (Amazon Linux)
#!/bin/bash
yum update -y
yum install -y httpd
yum install -y git
yum install -y awscli
systemctl start httpd
systemctl enable httpd
curl -s http://169.254.169.254/latest/dynamic/instance-identity/document \
> /var/www/html/index.html
-------------------------
IMDS concept (not syntax)
You should know:
169.254.169.254 = EC2 metadata service

Metadata can provide:
instance ID
region
account
IMDSv2 requires a token
Metadata should not be publicly exposed in production

EC2 User Data & Metadata ‚Äî Study Guide (Exam Focused)
What is EC2 User Data?
EC2 User Data is a startup script that runs once when an EC2 instance launches.

It is commonly used to:
Install software
Configure the operating system
Start services automatically
Perform basic bootstrapping tasks

üìå Key point: User data runs at first boot, not every restart.

Typical EC2 User Data Pattern (Conceptual)
You do not need to memorize commands ‚Äî recognize the intent.
#!/bin/bash
<update OS packages>
<install required software>
<start services>
<enable services on boot>

This pattern means:
‚ÄúAutomatically configure the instance when it starts.‚Äù

Common Example (Context Only)
#!/bin/bash
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd

Exam interpretation:
‚û°Ô∏è ‚ÄúThis script installs and starts a web server at launch.‚Äù

What is 169.254.169.254?
169.254.169.254 is the EC2 Instance Metadata Service (IMDS) for Amazon EC2.

It provides instance-specific information, such as:
Instance ID
Region
Availability Zone
Account ID
Instance type
This data is only accessible from inside the EC2 instance.

Why Classes Sometimes Use This Command
curl http://169.254.169.254/latest/dynamic/instance-identity/document \
> /var/www/html/index.html

Purpose (educational):
Proves the code is running on EC2
Demonstrates metadata access
Shows user data + web server working together

Important:
This is a demo pattern, not a production best practice.

IMDSv2 (Security Concept)
Modern EC2 instances use IMDSv2, which:
Requires a session token
Returns 401 Unauthorized if accessed without a token
Protects against SSRF attacks
üìå Exam-level understanding:
You only need to know IMDSv2 exists and is more secure.

What You DO Need to Know for the Exam

‚úÖ User data is for bootstrapping
‚úÖ It runs at instance launch
‚úÖ Metadata is available via IMDS
‚úÖ Metadata identifies the EC2 instance
‚úÖ Scripts automate configuration
‚ùå You do NOT need to memorize Linux commands
‚ùå You do NOT need to write metadata scripts from memory

How This Appears on the Exam

Typical question framing:

‚ÄúWhat is this script used for?‚Äù
‚ÄúWhy would user data be configured?‚Äù
‚ÄúWhat does accessing 169.254.169.254 indicate?‚Äù

Correct conceptual answers:
Automatic instance configuration
Retrieving EC2 metadata
Proving the application is running on a specific instance
One-Sentence Exam Takeaway (Memorize This)
EC2 user data is a startup script used to automatically configure an instance 
at launch, such as installing software and starting services.
--------------------------
Can you update the EC2 instance to a new AMI updated with latest patches?

Yes ‚Äî but not ‚Äúin place.‚Äù
EC2 instances cannot be updated to a new AMI directly. You do it via a replace-with-new-instance process.

Here's the brief, exam- and real-world-correct explanation.

The correct way to ‚Äúupdate‚Äù an EC2 instance to a new AMI
Key rule (important)

You don't update an instance to a new AMI ‚Äî you create a new instance from a new AMI.

AMI = launch-time artifact, not a live update mechanism.

Standard process (clean + safe)
Patch the existing instance

On the running instance:
sudo yum update -y

This applies:

OS updates
security patches

Create a new AMI from the patched instance

In Amazon EC2:
Select the instance
Actions ‚Üí Image and templates ‚Üí Create image
This AMI now includes the latest patches
Think of this as a golden image.

Launch a new instance from that AMI

Launch EC2 using the new AMI
Attach same security group / IAM role
Verify everything works

Terminate the old instance (optional)

Once confirmed:

Terminate the old instance
Zero compute cost
Clean environment

Why AWS works this way
AMIs are immutable
Immutable infrastructure is:
safer
repeatable
rollback-friendly
This avoids ‚Äúsnowflake servers‚Äù
This pattern is heavily tested on exams.

To update an EC2 instance with a new AMI, you create a new AMI 
from a patched instance and launch a replacement instance.

--------------------------

Application Load Balancer (ALB)
An Application Load Balancer (ALB) operates at Layer 7 (Application layer), 
handling HTTP/HTTPS traffic and making routing decisions based on URLs, 
host headers, paths, etc.

What it does:
Routes HTTP/HTTPS traffic based on URL paths, hostnames, headers.

Why you use it:
Modern web apps & APIs
Microservices
Path-based routing (e.g., /api, /images)
Think: Smart, Layer 7 web routing

Network Load Balancer (NLB)

What it does:
Handles TCP/UDP traffic at very high performance.

Why you use it:
Extreme performance & low latency
Non-HTTP traffic
Millions of connections per second
Think: Fast, Layer 4, no inspection

Classic Load Balancer (CLB)

What it does:
Legacy load balancing for basic HTTP/TCP traffic.

Why you use it:
Older applications
Backward compatibility only
Think: Old, avoid for new designs

One-line exam takeaway (memorize this)
ALB = HTTP logic, NLB = raw speed, CLB = legacy.

***Gateway Load Balancer
There is a fourth type of Load Balancer as well - Gateway Load Balancer

The Gateway Load Balancer (GWLB) is a specialized load balancer designed to 
deploy, scale, and manage third-party virtual appliances on AWS. It allows for 
seamless traffic distribution across multiple virtual appliances, providing a 
single entry point for all traffic while offering scalability and increased availability.

Key Points:

Purpose: Used to deploy, scale, and run third-party virtual appliances.

Functionality: Distributes traffic across multiple virtual appliances, 
scaling them based on demand, reducing potential points of failure, 
and enhancing network availability.

AWS Marketplace: Enables finding, testing, and purchasing virtual appliances 
directly from third-party vendors, simplifying the deployment process and 
accelerating time-to-value.

This addition ensures that users can efficiently manage their network traffic 
while leveraging third-party solutions directly within AWS.
----------------------------